<div class="dash-header">
  <div class="section">
    <app-headerdash [message]="message" ></app-headerdash>
  </div>
</div>
<div class="content-default m-1">
  <div class="card">
    <form id="form_period">
        <div style="flex-wrap: wrap" class="content-flex">
            <div class="content-flex mr-2">
                <label class="mr-1">Início</label>
                <input type="date" [(ngModel)]="dataInicio" (ngModelChange)="filter()" name="dataInicio" id="dataInicio">
            </div>
            <div class="content-flex">
                <label class="mr-1">Até</label>
                <input type="date" [(ngModel)]="dataFim" (ngModelChange)="filter()" name="dataFim" id="dataFim">
            </div>
        </div>
        <div class="content-justify content-flex--column m-1 content-flex--1">
            <label for="sigla" class="text-center">Escolha uma conta</label>
            <select name="sigla" [(ngModel)]="sigla" (ngModelChange)="filter()" class="align-last--center" name="sigla" id="sigla" required>
                <option value="POUPANCA">Conta Poupança</option>
                <option value="CORRENTE">Conta Corrente</option>
                <option value="CREDITO">Conta de Crédito</option>
            </select>
        </div>
        <button type="submit" (click)="filter()" class="btn btn-rounded btn-main-outline mt-2 mx-auto">Filtrar extrato</button>
    </form>
    <div class="mt-2">
      Conta selecionada: {{ sigla }}
    </div>
    <div >
        Saldo: <b [ngClass]="txtValor(accountData.saldo)">{{ loading ? 'Carregando...' : accountData.saldo | currency}}</b>
    </div>
    <ul>
      <li *ngFor="let lancamento of accountData.lancamentos">
      </li>
    </ul>
    <table class="tg">
      <thead>
        <tr>
          <th class="tg-0lax">Data</th>
          <th class="tg-0lax">Descrição</th>
          <th class="tg-0lax">Plano de Conta</th>
          <th class="tg-0lax">Valor</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let lancamento of accountData.lancamentos">
          <td class="tg-0lax">{{ lancamento.date | date: 'dd MMM YY' }}</td>
          <td class="tg-0lax">{{ lancamento.descricao }} <br>
            <small *ngIf="lancamento.contaOrigem.login != lancamento.contaDestino.login
                      ||  lancamento.contaOrigem.sigla != lancamento.contaDestino.sigla">
              de: {{lancamento.contaOrigem.login}} - {{lancamento.contaOrigem.sigla}}<br>
              para: {{lancamento.contaDestino.login}} - {{lancamento.contaDestino.sigla}}
            </small>
          </td>
          <td class="tg-0lax"><small>{{ lancamento.planoConta }}</small></td>
          <td [ngClass]="txtValor(lancamento.valor)" class="tg-0lax">{{ lancamento.valor | currency }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
